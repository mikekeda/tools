{% extends parent_template %}
{% load i18n %}
{% block content %}
  <style>
    label {
      padding: 6px 12px;
    }
  </style>

  <div class="container-fluid">
    <h4>{% trans "Temperature" %}</h4>
    <div class="row">
      <div class="form-group col-xs-6">
        <div class="row content-box col-xs-10">
          <input type="number" id="temp-C" class="form-control">
        </div>
        <label for="temp-C" class="control-label text-left col-xs-2">°C</label>
      </div>
      <div class="form-group col-xs-6">
        <div class="row content-box col-xs-10">
          <input type="number" id="temp-F" class="form-control">
        </div>
        <label for="temp-F" class="control-label text-left col-xs-2">°F</label>
      </div>
    </div>
    <h4>{% trans "Distance" %}</h4>
    <div class="row">
      <div class="form-group col-xs-6">
        <div class="row content-box col-xs-10">
          <input type="number" id="dist-km" class="form-control">
        </div>
        <label for="dist-km" class="control-label text-left col-xs-2">km</label>
      </div>
      <div class="form-group col-xs-6">
        <div class="row content-box col-xs-10">
          <input type="number" id="dist-mi" class="form-control">
        </div>
        <label for="dist-mi" class="control-label text-left col-xs-2">mi</label>
      </div>
    </div>
    <h4>{% trans "Volume" %}</h4>
    <div class="row">
      <div class="form-group col-xs-6">
        <div class="row content-box col-xs-10">
          <input type="number" id="vol-L" class="form-control">
        </div>
        <label for="vol-L" class="control-label text-left col-xs-2">L</label>
      </div>
      <div class="form-group col-xs-6">
        <div class="row content-box col-xs-10">
          <input type="number" id="vol-gal" class="form-control">
        </div>
        <label for="vol-gal" class="control-label text-left col-xs-2">gal</label>
      </div>
      <div class="form-group col-xs-6">
        <div class="row content-box col-xs-10">
          <input type="number" id="vol-cap" class="form-control">
        </div>
        <label for="vol-cap" class="control-label text-left col-xs-2">caps</label>
      </div>
    </div>
  </div>
  <script type="text/javascript">
    if("undefined" == typeof jQuery) {
      window.onload = function() {
        init_app();
      };
    }
    else {
      init_app();
    }
    function init_app() {
      var $C = $('#content #temp-C').first();
      var $F = $('#content #temp-F').first();
      var $km = $('#content #dist-km').first();
      var $mi = $('#content #dist-mi').first();
      var $L = $('#content #vol-L').first();
      var $gal = $('#content #vol-gal').first();
      var $cap = $('#content #vol-cap').first();

      // Temperature.
      $C.on('keyup change', function() {
        var value = parseFloat($(this).val(), 10);
        $F.val(parseFloat((value * 1.8 + 32).toFixed(2)));
      });
      $F.on('keyup change', function() {
        var value = parseFloat($(this).val(), 10);
        $C.val(parseFloat(((value - 32) / 1.8).toFixed(2)));
      });

      // Distance.
      $km.on('keyup change', function() {
        var value = parseFloat($(this).val(), 10);
        $mi.val(parseFloat((value * 0.621371).toFixed(2)));
      });
      $mi.on('keyup change', function() {
        var value = parseFloat($(this).val(), 10);
        $km.val(parseFloat((value / 0.621371).toFixed(2)));
      });

      // Volume.
      function update_volumes($unit, value) {
        var value = parseFloat($unit.val(), 10);
        $.each([[$L, 1], [$gal, 0.264172], [$cap, 0.236588236]], function () {
          if (!this[0].is($unit)) {
            this[0].val(parseFloat((this[1] * 0.264172).toFixed(2)));
          }
        });
      }
      $L.on('keyup change', function() {
        update_volumes($L);
      });
      $gal.on('keyup change', function() {
        update_volumes($gal);
      });
    }
  </script>
{% endblock %}
